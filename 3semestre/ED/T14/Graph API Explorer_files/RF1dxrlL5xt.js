/*!CK:2480348945!*//*1398879223,178191681*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ywUkM"]); }

__d("GraphExplorerFQLForm",["PlatformVersions"],function(a,b,c,d,e,f,g){function h(i,j){"use strict";this.typeahead=i;}h.prototype.setVersion=function(i){"use strict";var j=this.typeahead.getData();j.dirty();if(i===g.versions.UNVERSIONED)i=null;j.bootstrapData={version:i};j.bootstrap();};e.exports=h;});
__d("GraphFieldsParser",["isEmpty","copyProperties"],function(a,b,c,d,e,f,g,h){function i(p){this.queryString=this.escape(p);this.queryLength=p.length;this.index=-1;this.char='';this.next();}i.parse=function(p){p=p.trim();if(p.length>0&&p.charAt(0)=='['){var q=JSON.parse(p);if(Array.isArray(q)){p=q.join(',');}else throw new o('"fields" param is an invalid json-encoded array');}if(p==='')return {};var r=new i(p);r.whitespace();var s=r.fields();r.whitespace();r.end();return s;};h(i.prototype,{fields:function(){var p={},q=this.field();p[q.name]=q;while(this.char===','){this.next(',');this.whitespace();q=this.field();if(p[q.name]){p[q.name].merge(q);}else p[q.name]=q;}this.whitespace();return p;},field:function(){var p=this.name();this.whitespace();var q=this.calls();this.whitespace();return new j(p,q);},calls:function(){var p={};while(this.char==='.'){this.next('.');this.whitespace();var q=this.name();if(g(p)&&this.char!='('){p.fields={};p.fields[q]=new j(q);this.whitespace();break;}else p[q]=this.callParam(q);this.whitespace();}return p;},callParam:function(p){this.next('(');this.whitespace();var q=(p=='fields')?this.fields():this.callParamValue();this.whitespace();this.next(')');return q;},error:function(p){throw new n(p,this.index,this.queryString);},next:function(p){if(p&&p!==this.char)this.error('Expected "'+p+'" instead of "'+this.char+'".');this.index++;if(this.index>this.queryLength){this.error('Expected another character, but at end of string.');}else this.char=this.index===this.queryLength?null:this.queryString.charAt(this.index);},end:function(){if(this.char!==null)this.error('Expected end of string instead of "'+this.char+'".');},whitespace:function(){while(this.char===' '||this.char==="\t"||this.char==="\r"||this.char==="\n")this.next();},name:function(){var p=this.index;while(this._isValidNameChar(this.char))this.next();if(this.index===p)this.error('Expected name.');return this.unescape(this.queryString.substr(p,this.index-p));},_isValidNameChar:function(p){return (/^[a-zA-Z0-9_:=]$/).test(p);},callParamValue:function(){var p=this.index;while(this.char&&this.char!==')'&&this.char!==',')this.next();return this.queryString.substr(p,this.index-p);},escape:function(p){for(var q in l)p=p.replace(q,l[q]);return p;},unescape:function(p){return m[p]||p;}});function j(p,q){this.name=p;this.subFields=q;}h(j.prototype,{isScalar:function(){return g(this.subFields);},merge:function(p){var q=p.subFields;for(var r in q){var s=q[r];if(!this.subFields[r]){this.subFields[r]=s;}else for(var t in s){var u=s[t];if(!this.subFields[r][t]){this.subFields[r][t]=u;}else if(t=='fields'){this.subFields[r][t].merge(u);}else throw new o('Subfield '+r+' specified more than once');}}},toString:function(){if(this.isScalar())return this.name;var p=[];for(var q in this.subFields){var r=this.subFields[q];if(q=='fields')r=j.serialize(r);p.push(q+'('+r+')');}return this.name+(p.length?'.'+p.join('.'):'');}});j.serialize=function(p){var q=[];for(var r in p)q.push(p[r].toString());return q.join(',');};i.parseData=function(p){return k(this.parse(p));};function k(p){var q={};for(var r in p){var s=p[r];q[r]=true;if(!s.isScalar()){q[r]={};for(var t in s.subFields)if(t=='fields'){h(q[r],k(s.subFields.fields));}else q[r][t]=s.subFields[t];}}return q;}var l={},m={};i.initOGFields=function(p){p.forEach(function(q){var r=q.replace('.','_');l[q]=r;m[r]=q;});};var n=Error,o=Error;i.GraphFieldNode=j;i.QueryParseException=o;i.FieldsParseException=n;e.exports=i;});
__d("PlatformVersioning",["PlatformVersions","PlatformBaseVersioning","copyProperties","fbt"],function(a,b,c,d,e,f,g,h,i,j){var k={getDisplayableName:function(l){if(l===g.versions.UNVERSIONED)return "Unversioned";return l;}};i(k,h);e.exports=k;});
__d("GraphFieldsSelector",["Event","ArbiterMixin","CSS","DOM","Keys","Parent","copyProperties","getUnboundedScrollPosition"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(p){this._element=p;this._resultsElement=j.create('div',{className:'GraphFieldsSelector'});j.appendContent(document.body,this._resultsElement);this._initializeEvents();this._options=[];this.reset();}m(o.prototype,h,{reset:function(){this._selectedIndex=0;this._hideResults();},setOptions:function(p){this._options=p;},_initializeEvents:function(){g.listen(this._element,{keydown:this._handleKeydown.bind(this)});this._element.addEventListener('blur',this._handleBlur.bind(this),true);this._element.addEventListener('focus',this._handleFocus.bind(this),true);g.listen(this._resultsElement,{mousedown:this._handleResultsMousedown.bind(this),mouseover:this._handleResultsMouseover.bind(this)});},_handleKeydown:function(event){this._activeInput=event.getTarget();if(!i.hasClass(this._activeInput,'input'))return;var p=g.getKeyCode(event),q=true,r=0;switch(p){case k.TAB:return;case k.UP:r=-1;break;case k.DOWN:r=1;break;case k.RETURN:if(this._visible)this._selectResult();break;default:setTimeout(this._updateResults.bind(this),0);q=false;}if(r!==0)if(this._visible){this._selectedIndex=this._selectedIndex+r;this._updateResults();q=true;}else q=false;if(q)event.preventDefault();},_handleFocus:function(event){var p=event.getTarget();if(i.hasClass(p,'input')){this._activeInput=p;this.inform('focus',{input:p});this._updateResults();}},_handleBlur:function(){this._hideResults();this.inform('blur',{input:this._activeInput});},_handleResultsMousedown:function(event){this._selectResult();event.kill();},_handleResultsMouseover:function(event){var p=l.byTag(event.getTarget(),'li');if(!p)return;var q=[].indexOf.call(p.parentNode.childNodes,p);if(q!=this._selectedIndex){this._selectedIndex=q;this._updateResults();}},_showResults:function(){this._visible=true;i.show(this._resultsElement);},_hideResults:function(){this._visible=false;i.hide(this._resultsElement);},_selectResult:function(){this.inform('select',{input:this._activeInput,option:this._matches[this._selectedIndex]});},_buildResultsList:function(p){if(this._selectedIndex>this._matches.length-1){this._selectedIndex=0;}else if(this._selectedIndex<0)this._selectedIndex=this._matches.length-1;var q=this._matches.map(function(r,s){var t=null;if(r.type)t=j.create('span',{},"{"+r.type.name+"}");var u=s===this._selectedIndex?'selected':'';return j.create('li',{className:u},[r.name,t]);},this);return j.create('ul',{},q);},_updateResults:function(){var p=this._activeInput,q=p.value.toLowerCase().trim();this._matches=this._getMatches(q,this._options);if(!this._matches.length){this._hideResults();return;}var r=p.getBoundingClientRect(),s=n(window);this._resultsElement.style.top=r.bottom+s.y+'px';this._resultsElement.style.left=r.left+s.x+'px';j.setContent(this._resultsElement,this._buildResultsList());this._showResults();},_getMatches:function(p,q){if(!p)return q.slice(0,10);var r=[],s=/[_ ]+/g,t=p.split(s);for(var u=0;u<q.length;u++){if(q[u].name==p){r.unshift(q[u]);continue;}var v={values:{},options:{}},w=q[u],x=w.name.split(s),y=t.length;for(var z=0;z<t.length;z++)for(var aa=0;aa<x.length;aa++){var ba=t[z],ca=x[aa];if(ba in v.values||ca in v.options||ca.lastIndexOf(ba)!==0)continue;v.values[ba]=v.options[ca]=true;y--;}if(y===0)r.push(w);}return r.slice(0,10);}});e.exports=o;});
__d("GraphFieldsQB",["ArbiterMixin","DOM","DOMQuery","CSS","Focus","JSONPRequest","Keys","Parent","PlatformVersioning","UserAgent","URI","copyProperties","Event","GraphFieldsSelector"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(x){this._container=x;this._initializeEvents();this._initializeFieldsSelector();this._missedState=false;}r(t.prototype,g,{setSchema:function(x){this._schema=x;},setLoaderHost:function(x){this._loaderHost=x;},setApiVersion:function(x){this._apiVersion=x;},setAccessToken:function(x){this._accessToken=x;},_initializeEvents:function(){var x={keydown:this._handleKeydown.bind(this)},y=p.ie()<9?'click':'change';x[y]=this._handleField.bind(this);s.listen(this._container,x);s.listen(this._container,'click',this._expandConnection.bind(this));},_initializeFieldsSelector:function(){if(p.ie()<9)return;var x=b('GraphFieldsSelector');this._fieldsSelector=new x(this._container);this._fieldsSelector.subscribe('select',function(y,z){var aa=z.input,ba=aa.previousSibling;ba.value=z.option.name;var ca=this._doInsert(ba,function(){da.focus();});ba.focus();aa.value='';var da=(this._getFieldInput(ca)||aa);da.focus();}.bind(this));this._fieldsSelector.subscribe('focus',function(y,z){var aa=Array.prototype.map.call(z.input.previousSibling.options,function(ba){return {name:ba.text};}).slice(1);this._fieldsSelector.setOptions(aa);}.bind(this));},add:function(x,y,z,aa){y||(y=this._container);var ba=[],ca=(z&&this._isEdgePath(x.getName())?'Edge':'Node'),da=z?h.create('span',{},ca+': '):h.create('input',{type:'checkbox',checked:'checked',name:x.getName(),tabIndex:-1}),ea=h.create('label',{},[da,h.create('span',{},this._getFieldContent(x,y))]);ba.push(ea);if(x.isModifier())ba.push(this._getModifierNode(x,aa));this._updateParentSelect(x,y);if(x.hasSubFields()){var fa=this._getSubfieldsNode(x,y,z);fa&&ba.push.apply(ba,fa);}var ga=h.create('li',{className:'fieldNode',name:x.getName(),'data-type':x.getEdgeType(),'data-modifier':x.isModifier()?x.getValue():'','data-valid-values':x.getValidValues().join('|')},ba);if(x.isModifier()&&y.firstChild){h.insertBefore(y.firstChild,ga);}else h.appendContent(y,ga);!aa&&this._informOfChange();return ga;},remove:function(x,y,z){var aa=this._getLiNodeByName(x.getName(),y);if(aa){this._doRemove(aa);if(!z)this._informOfChange();}},set:function(x,y,z,aa){var ba=this._getLiNodeByName(x.getName(),y);if(ba){this._updateNodeValue(ba,x);return ba;}return this.add(x,y,z,aa);},reset:function(x,y,z){h.empty(this._container);this._missedState=false;return this.add(x,this._container,y,z);},setMissedState:function(){var x=this.reset(new u('not available'),true,true);h.appendContent(x,this._getNoFieldsNode());this._missedState=true;},isMissedState:function(){return this._missedState;},buildFromData:function(x,y,z){var aa=this._getParentSelect(z);for(var ba in x){var ca=null,da=null;aa.value=ba;if(typeof x[ba]=='object'){var ea=y?y[ba]:null;ca=this.buildFromData.bind(this,x[ba],ea);}else if(typeof x[ba]=='string')da=x[ba];this._doInsert(aa,ca,da,true);}if(y)this.updateMissedFields(y,z);},_getFieldContent:function(x,y){var z=x.getName();if(z.indexOf('/')!=-1&&y==this._container){var aa=z.split('/');if(aa.length!=2)return z;z=h.create('span',{},[h.create('a',{title:'Request /'+aa[0],className:'expandLink','data-path':aa[0]},aa[0]),'/'+aa[1]]);}if(this._isExpandableConnection(x,y)){var ba=this.getMainNode()+'/'+z;z=h.create('a',{title:'Request /'+ba,className:'expandLink','data-path':ba},z);}return z;},_isExpandableConnection:function(x,y){return this.getMainNode()&&this.getMainNode().indexOf('/')==-1&&y==this.getSubContainer(this._container)&&x.hasSubFields();},_updateNodeValue:function(x,y){if(!y.isModifier())return;var z=i.find(x,'span.valueInput');if(h.getText(z)==y.getValue())return;h.setContent(z,y.getValue());this._informOfChange();},_getModifierNode:function(x,y){var z=x.getValidValues(),aa=z.length!==0,ba=x.getValue();if(aa){ba=h.create('select',{className:'validValueSelect'},z.map(function(ea){return h.create('option',{value:ea},ea);}));ba.value=x.getValue();}var ca=h.create('span',{contenteditable:!aa,spellcheck:false,className:'valueInput'},ba),da=h.create('span',{className:'inputWrapper'},ca);if(!y&&!aa)this._selectModifierValue(ca);return da;},_getSubfieldsNode:function(x,y,z){var aa=h.create('select',{disabled:true,className:'loading plusbutton',tabIndex:-1},h.create('option',{value:'+',className:'plusoption'},'+'));if(p.ie()<9)v(aa);var ba=this._schema[x.getEdgeType()];aa.loadHandler=x.getLoadHandler();var ca={noModifiers:(y==this._container&&x.getName().indexOf('/')==-1),noLimit:/picture$/.test(x.getName())};if(ba){if(ba=='__missed__'){if(y==this._container)return this._getNoFieldsNode();return;}this._buildFields(aa,ca,ba);}else this._loadFields(x.getEdgeType(),this._buildFields.bind(this,aa,ca));var da='fields'+(z?' fixed':''),ea=this._getParentSelect(y);if(!ea||ea.options.length==1)da+=' lastParent';var fa=h.create('span',{className:'hidden_elem pager'},[h.create('a',{'data-page':'*',href:'#',title:'Previous page'},'\u2190'),h.create('a',{'data-page':'*',href:'#',title:'Next page'},'\u2192')]);s.listen(fa,'click',this._handlePaging.bind(this));var ga=p.ie()<9?null:h.create('input',{type:'text',disabled:!ba,className:'interactive input',placeholder:'Search for a field'});return [fa,h.create('div',{className:da},[h.create('ul',{className:'container'}),aa,ga])];},_buildFields:function(x,y,z){var aa=n.byTag(x,'ul');if(z=='__missed__'){if(aa==this._container){h.replace(x.parentNode,this._getNoFieldsNode());return;}h.remove(x.parentNode);return;}this._enableSelect(x);j.removeClass(x,'loading');h.appendContent(x,this._getOptGroupNodes(y));this._setSelectFields(x,z);x.loadHandler&&setTimeout(function(){x.loadHandler(x.previousSibling);});},_getNoFieldsNode:function(){return h.create('div',{className:'noFields'},'(No fields expansion available).');},_getOptGroupNodes:function(x){if(!x)x={};var y=[h.create('optgroup',{label:'fields'}),h.create('optgroup',{label:'connections'})],z=[];if(!x.noLimit)z.push(h.create('option',{value:'limit'},'limit'));if(!x.noModifiers)y.unshift(h.create('optgroup',{label:'modifiers'},z));return y;},_updateParentSelect:function(x,y){var z=this._getParentSelect(y);if(!z)return;var aa=i.scry(z,'option[value="'+x.getName()+'"]')[0];if(aa){h.remove(aa);if(z.options.length==1)this._toggleSelect(z,'hide');}},_loadFields:function(x,y){if(this._schema[x])return;var z=o.addVersionToPath('/schema/'+x,this._apiVersion);l.execute(this._loaderHost+z,'get',{access_token:this._accessToken||''},function(aa){var ba='__missed__';if(!aa.error){ba={base_type:aa.base_type,connections:[],fields:[],modifiers:[]};for(var ca in aa.properties)if(aa.properties[ca].type=='uri'){ba.connections.push(ca);}else ba.fields.push(ca);if(aa.params){for(ca in aa.params){if(ca=='redirect')continue;ba.modifiers.push(aa.params[ca]);}ba.modifiers.sort(function(ea,fa){return ea.name>fa.name;});}ba.connections.sort();ba.fields.sort();if(x.charAt(0)=='*'){var da=aa.describe;if(!this._schema[da])this._schema[da]=ba;ba=this._schema[da];}}this._schema[x]=ba;y&&y(ba);}.bind(this));},_loaderHost:'https://graph.facebook.com',_setSelectFields:function(x,y){this._setOptGroupFields(this._getConnectionsGroup(x),y.connections,y.base_type);this._setOptGroupFields(this._getFieldsGroup(x),y.fields);this._setOptGroupFields(this._getModifiersGroup(x),y.modifiers);},_setOptGroupFields:function(x,y,z){if(!x||!y.length)return;var aa=[];y.forEach(function(ba){var ca='',da='';if(typeof ba=='object'){ca=this._getDefaultModifierValue(ba);da=ba.valid_values?ba.valid_values.join('|'):'';ba=ba.name;}var ea={value:ba,'data-type':(z?z+'/'+ba:''),'data-modifier':ca,'data-valid-values':da};aa.push(h.create('option',ea,ba));},this);h.appendContent(x,aa);},_getDefaultModifierValue:function(x){if(x.valid_values)return x.valid_values[0];switch(x.type){case 'Boolean value':return 'true';case 'Number':return '0';default:return '<value>';}},_getFieldsGroup:function(x){return this._getGroup(x,'fields');},_getConnectionsGroup:function(x){return this._getGroup(x,'connections');},_getModifiersGroup:function(x){return this._getGroup(x,'modifiers');},_getGroup:function(x,y){return i.scry(x,'optgroup[label="'+y+'"]')[0];},_handleField:function(event){var x=event.getTarget(),y=n.byTag(x,'input'),z=n.byTag(x,'select');if(z&&j.hasClass(z,'validValueSelect')){this._informOfChange();return true;}if(y&&y.type!=='checkbox')return;if(z){this._doInsert(z);}else if(y)this._doRemove(y);},_expandConnection:function(event){var x=event.getTarget();if(!j.hasClass(x,'expandLink'))return;var y=x.getAttribute('data-path'),z={};if(y.indexOf('/')!=-1)z=this.buildQuery(this.getSubContainer(n.byTag(x,'li')));this.inform('change',[z,y]);this.inform('submit');event.kill();},_doInsert:function(x,y,z,aa){var ba=x.options[x.selectedIndex];if(ba.text=='+')return;x.selectedIndex=0;var ca=ba.getAttribute('data-valid-values');return this.add(new u(ba.text,ba.getAttribute('data-type'),z||ba.getAttribute('data-modifier')||'',y,(ca?ca.split('|'):null)),x.previousSibling,false,aa);},_doRemove:function(x){return this._removeLi(n.byTag(x,'li'));},_removeLi:function(x){if(!x)return;var y=this._getParentSelect(n.byTag(x,'ul'));if(y){var z=x.getAttribute('data-type'),aa=x.getAttribute('data-modifier'),ba=aa?this._getModifiersGroup(y):(z?this._getConnectionsGroup(y):this._getFieldsGroup(y));if(ba){var ca=h.create('option',{value:x.getAttribute('name'),'data-type':z,'data-modifier':aa,'data-valid-values':x.getAttribute('data-valid-values')},x.getAttribute('name')),da=ba.childNodes;for(var ea=0;ea<da.length;ea++)if(da[ea].text>ca.text)break;if(ea==da.length){h.appendContent(ba,ca);}else h.insertBefore(da[ea],ca);}this._toggleSelect(y,'show');}h.remove(x);this._informOfChange();},_handleKeydown:function(event){var x=n.byClass(event.getTarget(),'valueInput');if(!x)return;var y=s.getKeyCode(event);if(y==m.RETURN){event.kill();this.inform('submit');return;}if(y==m.UP||y==m.DOWN||y==m.LEFT||y==m.RIGHT)return;setTimeout(function(){this._informOfChange();}.bind(this),0);},_handlePaging:function(event){var x=n.byTag(event.getTarget(),'a');if(!x)return;var y=x.getAttribute('data-page');if(y=='*')return;y=y.split('|');var z=this.getSubContainer(n.byTag(x,'li'));y.forEach(function(aa){aa=aa.split(':');this._removeExclusive(aa[0],z);this.set(new u(aa[0],'',aa[1]),z);},this);x.setAttribute('data-page','*');this.inform('submit');event.kill();},_removeExclusive:function(x,y){this._removeLi(this._getLiNodeByName(u.exclusiveModifiers[x],y));},_isEdgePath:function(x){return x.indexOf('/')!=-1;},_getParentSelect:function(x){if(x.nextSibling&&x.nextSibling.options)return x.nextSibling;return null;},_getFieldInput:function(x){return i.scry(x,'.input')[0];},_toggleSelect:function(x,y){j[y](x);x.nextSibling&&j[y](x.nextSibling);},_enableSelect:function(x){x.removeAttribute('disabled');x.nextSibling&&x.nextSibling.removeAttribute('disabled');},_selectModifierValue:function(x){if(!window.getSelection)return;setTimeout(function(){k.set(x);window.getSelection().selectAllChildren(x);},20);},_informOfChange:function(){this.inform('change',[this.buildQuery(),null]);return true;},buildQuery:function(x){this._subContainer=x||this.getSubContainer(this._container);if(!this._subContainer)return '';return this._compileQuery(this._subContainer);},getSubContainer:function(x){return i.scry(x,'ul')[0];},_compileQuery:function(x){var y=[],z={},aa=x.childNodes,ba=aa.length;for(var ca=0;ca<ba;ca++){var da=aa[ca],ea=da.getAttribute('name'),fa=da.getAttribute('data-modifier');if(fa){var ga=this._getNodeModifierValue(da);z[ea]=ga;continue;}var ha=this.getSubContainer(da);if(ha)ea=ea+this._compileQuery(ha);y.push(ea);}if(x==this._subContainer)return this._compileMainResult(y,z);return this._compileSubFields(y,z);},_compileMainResult:function(x,y){var z={};if(x.length)z.fields=x.join(',');for(var aa in y)z[aa]=y[aa];return z;},_compileSubFields:function(x,y){var z=[];for(var aa in y)z.push('.'+aa+'('+y[aa]+')');return z.join('')+(x.length?'.fields('+x.join(',')+')':'');},getMainNode:function(){var x=this._container.firstChild;if(!x)return null;return x.getAttribute('name');},_getNodeModifierValue:function(x){var y=i.find(x,'span.valueInput'),z=i.scry(y,'select')[0];if(z)return z.value;return h.getText(y);},_getLiNodeByName:function(x,y){var z=y.childNodes;for(var aa=0;aa<z.length;aa++)if(z[aa].getAttribute('name')==x)return z[aa];return null;},_getPagingBlock:function(x){return x.firstChild.nextSibling;},updatePaging:function(x){if(this.getMainNode().indexOf('/')!=-1)return this._setPaging(this._container.firstChild,x);var y=this.getSubContainer(this._container).childNodes;for(var z=0;z<y.length;z++){var aa=y[z];if(!this.getSubContainer(aa))continue;this._setPaging(aa,x[aa.getAttribute('name')]);}},_setPaging:function(x,y){var z=this._getPagingBlock(x);if(!y||!y.paging){j.hide(z);return;}this._setPagingData(z.firstChild,y.paging.previous);this._setPagingData(z.lastChild,y.paging.next);j.show(z);},_setPagingData:function(x,y){if(!y){j.hide(x);return;}j.show(x);var z=new q(y).getQueryData(),aa=[];for(var ba in u.modifiersData)z[ba]&&aa.push(ba+':'+z[ba]);x.setAttribute('data-page',aa.join('|'));},updateMissedFields:function(x,y){if(!y)y=this.getSubContainer(this._container);var z=y.childNodes;for(var aa=0;aa<z.length;aa++){var ba=z[aa],ca=ba.getAttribute('name'),da=ba.getAttribute('data-modifier'),ea=this.getSubContainer(ba),fa=!da&&!(ca in x);if(Array.isArray(x.data))fa=x.data.every(function(ga){return !da&&!(ca in ga);});if(fa){ba.setAttribute('title','Field is empty or disallowed by the access token');j.addClass(ba,'missed');continue;}j.removeClass(ba,'missed');if(ea&&typeof x[ca]=='object')this.updateMissedFields(x[ca],ea);}},_schema:{}});function u(x,y,z,aa,ba){this._name=x;this._edgeType=y;this._value=z;this._validValues=ba||[];this._loadHandler=aa;this._customModifier=!!this._value;}r(u.prototype,{isModifier:function(){return u.isModifier(this._name)||this._customModifier;},hasSubFields:function(){return !!this._edgeType;},getName:function(){return this._name;},getValue:function(){return this._value||u.modifiersData[this._name];},getValidValues:function(){return this._validValues;},getEdgeType:function(){return this._edgeType;},getLoadHandler:function(){return this._loadHandler;}});r(u,{isModifier:function(x){return x in this.modifiersData;},modifiersData:{limit:10,offset:10,since:'<timestamp>',until:'<timestamp>',after:'<cursor>',before:'<cursor>',__after_id:'<id>',__before_id:'<id>'},exclusiveModifiers:{since:'until',until:'since',after:'before',before:'after',__after_id:'__before_id',__before_id:'__after_id'}});function v(x){s.listen(x,{mousedown:w,blur:w,change:w});}function w(event){if(event.type=='mousedown'){j.addClass(this,'ieExpanded');return;}j.removeClass(this,'ieExpanded');}t.Field=u;e.exports=t;});
__d("XDeveloperAccessTokenDebugControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/tools\/debug\/accesstoken\/",{q:{type:"String"},app_id:{type:"Int"},version:{type:"String"}});});
__d("XDeveloperExplorerControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/tools\/explorer\/{?app_id}\/",{method:{type:"String"},path:{type:"String"},fields:{type:"StringVector"},session_id:{type:"Int"},version:{type:"String"},app_id:{type:"Int"},from_bug_tool:{type:"Exists"}});});
__d("XDeveloperExplorerSessionAsyncEndpointControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/tools\/explorer\/session\/",{});});
__d("XDeveloperExplorerAppTokenControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/tools\/explorer\/app-token\/",{});});
__d("htmlHyperlink",["Env","htmlize","UntrustedLink","URI","URLScraper","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n,o,p,q){if(typeof n==='undefined'||!n.toString)return '';if(typeof o!=='function')o=h;if(typeof p!=='function')p=h;var n=n.toString(),r=[],s;while((s=k.match(n))){var t=n.indexOf(s);if(t>=0)r.push(o(n.substring(0,t)));var u=p(s),v=s.replace(/"/g,'%22');if(!(/^[a-z][a-z0-9\-+.]+:\/\//i.test(s)))v='http://'+v;if(j.isValidURI(v)){r.push('<a target="_blank" rel="nofollow" '+'class="'+"_553k"+'" '+'href="'+v+'"');if(q&&!j(v).isFacebookURI()){a.UntrustedLink=i;r.push(' onmousedown="UntrustedLink.bootstrap(this, \''+g.lhsh+'\', event)"');}r.push('>'+u+'</a>');}else r.push(u);n=n.substring(t+s.length);}n&&r.push(o(n));return r.join('');}e.exports=m;});
__d("GraphExplorer",["Event","AsyncRequest","AsyncResponse","Button","CSS","DOM","Form","GraphFieldsParser","GraphFieldsQB","HTML","PageTransitions","PlatformVersioning","PlatformVersions","SelectorDeprecated","URI","XHRRequest","copyProperties","htmlize","PHPQuerySerializer","XDeveloperAccessTokenDebugControllerURIBuilder","XDeveloperExplorerControllerURIBuilder","XDeveloperExplorerSessionAsyncEndpointControllerURIBuilder","XDeveloperExplorerAppTokenControllerURIBuilder","$","fbt","ge","htmlHyperlink","startsWith","endsWith"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){var ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb='collapsed',cb=false,db;function eb(pd,qd,rd,sd,td,ud,vd,wd,xd,yd){ja=pd;ka=qd;la=rd;ma=td;na=da('graph_form');pa=da('response_body');qa=false;ra=0;cb=ud;db=yd;sd&&n.initOGFields(sd);if(fa('status_bar')){k.hide(da('status_bar_response_text'));k.hide(da('status_bar_request_text'));}if(ka=='0')ka=null;ua=u.getRequestURI().domain.replace('developers','api');if(la){yb(la);}else xb();lc();g.listen('parent_link','click',kc);g.listen('clear_access_token','click',xb);t.listen(da('graph_method'),'change',cc);wd.subscribe('change',qb);za=wd;vd.subscribe('change',dc);ya=vd;if(xd){xd.subscribe('change',ec);kb(xd.getValue());}else kb(s.versions.UNVERSIONED);g.listen('graph_form','submit',id);if(ma)g.listen('save_session','click',gd);g.listen('access_token','keyup',ub);g.listen('access_token','change',ub);g.listen('debug_access_token','click',rb);g.listen('get-app-token','click',tb);g.listen('postvar_add','click',fc);g.listen('access_token','click',function(){da('access_token').focus();da('access_token').select();});g.listen('parent_link','click',kc);xa=true;q.registerHandler(xc);if(fa('fql_form')){g.listen('tab_graph','click',ac);g.listen('tab_fql','click',bc);g.listen('fql_form','submit',jd);}var zd=q.getCurrentURI().getQueryData();if(zd.fql||(zd.method&&zd.path)){xc(q.getCurrentURI(),true);}else if(ka){if(zd.fql===null){q.go(new u(location.href).addQueryData({fql:'SELECT uid, username, name, sex, pic FROM user WHERE uid = '+ka}));}else{var ae=new u(location.href).setQueryData({method:"GET",path:u.encodeComponent('me')+(fa('graph_query_builder')?'?fields=id,name':'')});if(cb)ae.addQueryData({version:gb()});q.go(ae);}}else if(zd.fql===null)bc();hb();g.listen(da('graph_prefix'),'click',ib);nb(zd.path);sb();}function fb(){if(!sa)sa=u.getRequestURI().domain.replace('developers','graph');return sa;}function gb(){if(!cb)return '';return lb();}function hb(){var pd=r.addVersionToPath('/',lb());ta={expanded:'\u2190 https://'+fb()+pd,collapsed:'\u2192 '+pd};}function ib(){bb=this.expanded?'collapsed':'expanded';this.expanded=!this.expanded;this.setAttribute('title',(this.expanded?'Hide':'Show')+' host');l.setContent(this,ta[bb]);}function jb(){return mb(da('graph_path').value);}function kb(pd){ab=pd;}function lb(){return ab;}function mb(pd){var qd=u('/'+pd);return qd.setPath(qd.getPath().substring(1));}function nb(pd){if(!fa('graph_query_builder'))return;va=new o(da('qb_container'));va.setLoaderHost('https://'+fb()+'/');va.setApiVersion(lb());va.subscribe('change',function(qd,rd){k.show(da('fields_modified'));var sd=jb(),td=rd[0],ud=rd[1],vd=!ud;if(!td.locale)ya.setValue('en_US');sd.setQueryData(td);if(ud)sd.setPath(ud);sd=decodeURIComponent(sd.toString());da('graph_path').value=sd.toString();if(vd)wa=sd;});va.subscribe('submit',id);}function ob(){return za.getValue().split("|",2)[0];}function pb(){return Number(za.getValue().split("|",2)[1]);}function qb(){var pd=ob(),qd=(new aa()).setInt('app_id',pd).getURI().getPath();sb();window.location.href=q.getCurrentURI().setPath(qd);}function rb(){var pd=(new z()).setString('q',da('access_token').value).getURI();window.open(pd);}function sb(){j.setEnabled(da('get-app-token'),pb());}function tb(){var pd={app_id:ja,response:JSON.stringify(oa)};new h().setMethod('POST').setURI((new ca()).getURI()).setHandler(function(qd){return yb(qd.getPayload().app_token);}).setData(pd).setErrorHandler(i.defaultErrorHandler).send();}function ub(){var pd=da('access_token');if(pd&&pd.value&&pd.value.length>0){k.show(da('clear_access_token_cell'));k.show(da('debug_access_token_cell'));}else{k.hide(da('clear_access_token_cell'));k.hide(da('debug_access_token_cell'));}}function vb(pd){var qd=window.location.hostname,rd=qd.replace('developers','www'),sd=window.location.protocol+'//'+qd,td={response_type:'token',display:'popup',client_id:ja,redirect_uri:sd+'/tools/explorer/callback'},ud=m.serialize(pd.controller);if(ud){var vd=[];for(var wd in ud)vd.push(wd);td.scope=vd.join(',');}var xd=r.addVersionToPath('/dialog/oauth',lb()),yd='https://'+rd+xd;yd+='?'+y.serialize(td);window.open(yd,'authwindow','width=600,height=350');return false;}function wb(pd){var qd=y.deserialize(pd.substr(1));if(qd.access_token)yb(qd.access_token);}function xb(event){da('access_token').value='';ub();return false;}function yb(pd){da('access_token').value=pd;k.removeClass(da('access_token'),'DOMControl_placeholder');ub();}function zb(){if(k.hasClass(da('access_token'),'DOMControl_placeholder'))return false;var pd=da('access_token').value;if(pd===''){return false;}else return pd;}function ac(){k.show(da('response_panel'));if(fa('fql_form')){k.addClass(da('tab_graph'),"uiPillButtonSelected");k.removeClass(da('tab_fql'),"uiPillButtonSelected");k.show(da('graph_form'));k.hide(da('fql_form'));var pd=t.getValue(da('graph_method'));if(fa('graph_query_builder')&&pd=='GET')k.addClass(da('response_panel'),'show_qb');}}function bc(){k.show(da('response_panel'));if(fa('fql_form')){k.removeClass(da('tab_graph'),"uiPillButtonSelected");k.addClass(da('tab_fql'),"uiPillButtonSelected");k.hide(da('graph_form'));k.show(da('fql_form'));if(fa('graph_query_builder'))k.removeClass(da('response_panel'),'show_qb');}}function cc(){var pd=t.getValue(da('graph_method'));if(pd=='POST'){hc();}else ic();if(pd=='GET'){k.addClass('response_panel','show_qb');}else k.removeClass('response_panel','show_qb');return false;}function dc(pd,qd){var rd=ya.getValue(),sd=va.getSubContainer(da('qb_container'));if(!sd)return;if(rd&&rd!='en_US'){va.set(new o.Field('locale','',rd),sd);}else va.remove(new o.Field('locale','',''),sd);}function ec(pd,qd){kb(qd.value);hb();l.setContent(da('graph_prefix'),ta[bb]);da('get_access_token').setAttribute('href','/tools/explorer/'+ja+'/permissions?version='+qd.value);va.setApiVersion(lb());db.setVersion(lb());}function fc(event,pd,qd){var rd=da('postvar_prototype').firstChild.cloneNode(true);if(pd){var sd=rd.childNodes[0];sd.setAttribute('value',pd);k.removeClass(sd,'DOMControl_placeholder');if(qd){var td=rd.childNodes[1];l.setContent(td,qd);k.removeClass(td,'DOMControl_placeholder');}}l.appendContent(da('postvar_list'),rd);return false;}function gc(pd){l.remove(pd.parentNode);return false;}function hc(){k.show(da('postvars'));}function ic(){k.hide(da('postvars'));l.empty(da('postvar_list'));}function jc(pd){l.empty(da('postvar_list'));for(var qd in pd)fc(null,qd,pd[qd]);}function kc(){wc(da('parent_link').href);return false;}function lc(){k.hide(da('parent_link'));}function mc(pd){var qd=da('parent_link');qd.setAttribute('href','https://graph.facebook.com/'+pd);k.show(da('parent_link'));}function nc(pd){var qd=new Date();function rd(ud){var vd=ud.metadata.connections;if(vd)for(var wd in vd)if(vd.hasOwnProperty(wd))vd[wd]=uc(vd[wd]);}j.setEnabled(da('graph_submit'),true);if(va)m.setDisabled(da('qb_container'),false);l.empty(da('response_body'));l.empty(da('response_fields'));k.removeClass(da('response_panel'),'loading');if(!qa){lc();l.empty(da('response_connections'));}if(pd.metadata){qc(pd.metadata);rd(pd);}for(var sd in pd)if(pd.hasOwnProperty(sd))if(pd[sd]&&pd[sd].metadata)rd(pd[sd]);rc(pd);sc(qd-ra);qa=false;var td=t.getValue(da('graph_method'));if(td=='POST'||td=='DELETE'){va.setMissedState();}else oc(pd);}function oc(pd){if(!va)return;var qd=jb(),rd=u.decodeComponent(qd.toString()),sd=qd.getQueryData();if(!sd.locale){ya.setValue('en_US');}else ya.setValue(sd.locale);var td=sd.fields,ud=qd.getPath();if(wa!=rd||va.isMissedState()){va.setAccessToken(zb());va.reset(new o.Field(ud,'*'+ud,'',function(){td&&va.buildFromData(n.parseData(td),pd,va.getSubContainer(da('qb_container')));pc(sd);va.updatePaging(pd);k.hide(da('fields_modified'));wa=rd;}),true,true);}else{va.updatePaging(pd);va.updateMissedFields(pd);}}function pc(pd){var qd=va.getSubContainer(da('qb_container'));delete pd.fields;delete pd.metadata;for(var rd in pd)va.set(new o.Field(rd,'',pd[rd]),qd,false,true);}function qc(pd){if(pd.connections&&!qa){var qd=[];for(var rd in pd.connections)qd.push(rd);qd.sort();qd.forEach(function(wd){var xd=document.createElement('A');l.setContent(xd,wd);xd.setAttribute('href',pd.connections[wd].split('?',1)[0]);k.addClass(xd,'connection');var yd=document.createElement('LI');yd.appendChild(xd);da('response_connections').appendChild(yd);});vc('response_connections');}if(pd.fields)for(var sd in pd.fields){var td=pd.fields[sd];if(td&&td.name&&td.description){var ud=document.createElement('DT');l.setContent(ud,td.name);var vd=document.createElement('DD');l.setContent(vd,td.description);da('response_fields').appendChild(ud);da('response_fields').appendChild(vd);}}}function rc(pd){oa=tc(pd);l.setContent(da('response_body'),nd(oa));da('response_body').scrollTop=0;vc('response_body');}function sc(pd){if(fa('status_bar')){k.hide(da('status_bar_request_text'));l.setContent(da('status_bar_response_text'),ea._("Response received in {time} ms",[ea.param("time",pd)]));k.show(da('status_bar_response_text'));}}function tc(pd){if(pd&&pd.paging){if(pd.paging.next)pd.paging.next=uc(pd.paging.next);if(pd.paging.previous)pd.paging.previous=uc(pd.paging.previous);}return pd;}function uc(pd){pd=new u(pd);var qd=Object.keys(pd.getQueryData()).filter(function(rd){return (/^(?!__paging_token|__after_id|__before_id)__/).exec(rd);}).concat(['format','access_token','callback','metadata','method']);return u.decodeComponent(pd.removeQueryData(qd).toString());}function vc(pd){l.scry(fa(pd),'a').forEach(function(qd){g.listen(qd,'click',function(event){var rd=event.target?event.target:event.srcElement;if(kd(rd.hostname)){if(k.hasClass(rd,'connection')){var sd=l.scry(fa('response_connections'),'li a');for(var td=0;td<sd.length;++td)k.removeClass(sd[td],'active');k.addClass(rd,'active');qa=true;if(!k.shown('parent_link'))mc(dd());}wc(rd.href);return false;}else{rd.setAttribute('target','_blank');return true;}});});}function wc(pd){var qd=u(pd),rd=mb(qd.getPath().substring(1)).setQueryData(qd.getQueryData()).toString(),sd=new u(u.getRequestURI()).removeQueryData('fql').setQueryData({method:"GET",path:rd});if(cb)sd.addQueryData({version:gb()});q.go(sd);}function xc(pd,qd){var rd=w({},pd.getQueryData()),sd=rd.method,td=rd.path,ud=rd.fql;if(ud){bc();fd(ud);if(!qd)ad(ud);}else{ac();if(!sd||!td)return false;delete rd.method;delete rd.path;cd(td);ed(sd);if(sd=='POST')jc(rd);if(sd=='GET')if(!qd)yc(sd,td);}q.transitionComplete();return true;}function yc(pd,qd,rd){var sd={method:pd};if(rd)for(var td in rd)sd[td]=rd[td];if(!qa)k.removeClass(da('response_panel'),'show_meta');sd=zc(sd,fa('profiling'));var ud=r.addVersionToPath('/'+qd,lb());bd('https://'+fb()+ud,sd);}function zc(pd,qd){if(ka&&qd)t.getSelectedOptions(qd).forEach(function(rd){var sd=t.getOptionValue(rd);if(sd=='fbtrace'){pd[sd]=1;}else{pd[sd+'_sample']=true;pd[sd+'_user']=ka;}});return pd;}function ad(pd){var qd={q:pd};qa=false;k.removeClass(da('response_panel'),'show_meta');qd=zc(qd,fa('profiling',fa('fql_form')));var rd='https://'+fb()+r.addVersionToPath('/fql',lb());bd(rd,qd);}function bd(pd,qd){qd.format='json';qd.suppress_http_code='1';var rd=zb();if(rd)qd.access_token=rd;if(!qa)k.removeClass(da('response_panel'),'show_meta');k.addClass(da('response_panel'),'loading');var sd=u(pd);sd.addQueryData(qd);for(var td in sd.getQueryData())if(/[^a-zA-Z0-9_.-:]/.test(td))sd.removeQueryData(td);ra=new Date();if(fa('status_bar')){k.hide(da('status_bar_response_text'));k.show(da('status_bar_request_text'));}j.setEnabled(da('graph_submit'),false);if(va)m.setDisabled(da('qb_container'),true);new v(sd).setMethod('GET').setErrorHandler(function(){nc({error:'Request failed'});}).setResponseHandler(function(ud){try{nc(JSON.parse(ud));}catch(vd){nc({error:'Invalid response'});}}).send();}function cd(pd){da('graph_path').value=pd;}function dd(){return da('graph_path').value;}function ed(pd){t.setSelected(da('graph_method'),pd,true);cc();}function fd(pd){da('fql_query').value=pd;}function gd(){var pd={app_id:ja,response:JSON.stringify(oa),version:gb()};if(hd()){pd.api_type='fql';pd.query=da('fql_query').value;}else{var qd=da('graph_path').value,rd=t.getValue(da('graph_method')),sd='method='+rd+'&path='+qd;pd.api_type='graph_api';pd.query=sd;}j.setEnabled(da('save_session'),false);new h().setMethod('POST').setURI((new ba()).getURI()).setHandler(function(td){j.setEnabled(da('save_session'),true);}).setData(pd).setErrorHandler(i.defaultErrorHandler).send();}function hd(){return k.hasClass(da('tab_fql'),'uiPillButtonSelected');}function id(event){var pd=da('graph_path').value,qd=t.getValue(da('graph_method')),rd=m.serialize(da('graph_form')),sd={},td=u(q._current_uri);td.setQueryData({method:qd,path:pd});if(cb)td.addQueryData({version:gb()});if(rd.postvar_name&&rd.postvar_value){for(var ud=0;ud<rd.postvar_name.length;ud++){var vd=rd.postvar_name[ud],wd=rd.postvar_value[ud];if(vd&&wd)sd[vd.trim()]=wd;}td.addQueryData(sd);}if(qd=='POST'||qd=='DELETE'){yc(qd,pd,sd);}else if(qd=='GET')q.go(td);return false;}function jd(event){var pd=da('fql_query').value,qd=u(q._current_uri);qd.setQueryData({fql:pd});q.go(qd);return false;}function kd(pd){var qd=pd.match(/^graph\.[-a-zA-Z0-9.]*facebook.com$/);if(qd===null){return false;}else return true;}function ld(pd,qd){if(pd&&(pd=='id'||pd=='username'||pd=='owner'||ha(pd,'uid')||ia(pd,'_id'))){return l.create('a',{href:md(qd)},qd);}else if((pd=='previous'||pd=='next')&&/^https?:/.test(qd)){var rd=qd;for(var sd in s.versions)rd=rd.replace(s.versions[sd]+'/','');return l.create('a',{href:rd},qd);}else{var td=function(ud){ud=JSON.stringify(ud);ud=ud.substr(1,ud.length-2);return x(ud);};return p(ga(qd,td,td,true));}}function md(pd){if(xa)return 'https://'+fb()+'/'+pd;return u.getRequestURI().setQueryData({method:'GET',path:pd});}function nd(pd,qd,rd){if(!qd)qd=0;function sd(xd){var yd='';for(var zd=0;zd<xd;zd++)yd+='\u00a0\u00a0';return yd;}var td=[];td.push(l.create('div',{className:'fieldsModified hidden_elem',id:'fields_modified'},'(click submit to refresh)'));if(typeof(pd)=="string"){var ud=l.create('span',{className:'json_string'});l.appendContent(ud,'"');l.appendContent(ud,ld(rd,pd));l.appendContent(ud,'"');td.push(ud);}else if(typeof(pd)=="number"){td.push(l.create('span',{className:'json_int'},ld(rd,pd)));}else if(typeof(pd)=="boolean"){td.push(l.create('span',{className:'json_bool'},pd.toString()));}else if(typeof(pd)=="object")if(pd===null){td.push(l.create('span',{className:'json_bool'},'null'));}else if(pd instanceof Array){td.push('[');td.push(l.create('br'));for(var vd=0;vd<pd.length;vd++){td.push(sd(qd+1));td=td.concat(nd(pd[vd],qd+1));if(vd<pd.length-1)td.push(', ');td.push(l.create('br'));}td.push(sd(qd));td.push(']');}else{td.push('{');td.push('');for(var wd in pd){td.push(l.create('br'));td.push(sd(qd+1));td.push('"'+wd.toString()+'"');td.push(': ');td=td.concat(nd(tc(pd[wd]),qd+1,wd.toString()));td.push(', ');}td.pop();td.push(l.create('br'));td.push(sd(qd));td.push('}');}return td;}var od={init:eb,postvarsRemoveField:gc,obtainAccessToken:vb,authCallback:wb,clearAccessToken:xb,object2html:nd};a.graphexplorer=e.exports=od;});
__d("FQLInputTypeaheadRenderer",["DOM"],function(a,b,c,d,e,f,g){function h(i,j){var k=[],l=i.display||i.text;if(l)k.push(g.create('span',{className:'text'},[l]));if(i.subtext)k.push(g.create('span',{className:'subtext',title:i.subtext_title||''},[i.subtext]));var m=g.create('li',{className:i.type||''},k);if(i.text)m.setAttribute('aria-label',i.text);return m;}h.className='basic';e.exports=h;});